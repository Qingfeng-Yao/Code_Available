《彩虹六号》开发日志：Y5S1 的爆炸与碎片
在《彩虹六号：围攻》中爆炸会发生什么事？什么因素会影响爆炸伤害的计算？这一切是如何运作的？爆炸在《彩虹六号；围攻》的游戏内容中扮演着重要的角色。它们不是只会爆炸而已——它们能突破防线、创造路径、提供情报和实用性，而有时候它们能让你获得胜利。在这篇开发日志中，我们将深入解说爆炸如何运作，以及我们希望它演变的走向 剖析爆炸《彩虹六号：围攻》的环境破坏是独一无二的，并且绝对不会发生两次相同的爆炸。一旦爆炸发生，所造成的物理伤害和环境破坏都是以毫秒来计算。玩家会接收到视觉和听觉提示，如果玩家在爆破范围内的话就会受到伤害。为了实现这一切，我们的爆炸引擎必须经历一系列步骤。爆破范围与形状每种类型的爆炸都是由许多个数据点定义，而这决定了爆炸的形状以及其影响范围。爆炸形状会根据爆裂物类型而改变——破片手榴弹是放射状，而人员杀伤地雷则是椭圆形。当爆炸发生时，游戏会产生爆炸形状并向我们的物理引擎送出查询请求。然后，利用引爆的发生地和爆炸形状查询，会得到一份出现在爆破范围内的实体（特勤干员和物件）清单。这是会被爆炸影响的潜在实体清单。*光线投射（RAYCASTING）决定被击中的人事物我们的物理引擎会根据爆破效范围果内的潜在实体清单执行光线投射。这些光线投射是探索性的直线，从爆炸中心向外朝爆破范围内任何实体以及其查询点移动。每个实体都有许多个别的查询点，用来决定其是否受到伤害。不再只是锁定角色模型骨架的一点或特勤干员身上的单一目标点，这些查询点让我们对特勤干员是否受到爆破伤害做出更好的决定，同时保持最佳效能和最小延迟。光线投射根据特定的参数锁定这些查询点，并建立数据点以供之后计算伤害输出。例如，光线投射会锁定特勤干员物理外层离爆炸发生地最接近的点，以及包围体的4个点（包含特勤干员视觉特效的形状），同时光线投射会利用一套不同的规则锁定墙面的查询点。*光线投射的结果决定爆炸是否会影响实体。*在计算伤害前，还有一项变数会造成影响。环境物件会改变爆破形状的元素，并且可能让你免于承受伤害。在球体内的封阻物和特勤干员被选为会受爆炸影响的实体。是「后设资料」救了你具有阻挡爆破伤害后设资料的物件vs 不在Realblast 范围内的物件 一旦光线投射到达受爆破影响实体，回传的资料就会决定爆炸的结果。在《彩虹六号；围攻》中，有些物件能够阻挡爆炸伤害。所有物件都有的后设资料，用于定义自己以及其如何和游戏内其他元素互相影响。特定物件含有阻挡爆炸伤害的后设资料，例如金属封阻物、城墙、机动护盾等等。如果光线投射路径在到达爆破范围内特勤干员身上的查询点之前，碰撞到具有阻挡爆炸伤害后设资料的物件，你就不会有事。如果光线投射没有撞上任何事物，或者撞上的物件没有能阻挡伤害的后设资料，你就会受到伤害。这也适用于拥有范围爆炸效果的装备，例如Thatcher 的电磁脉冲。*具有阻挡爆破伤害后设资料的物件vs 不在Realblast 范围内的物件。*最后，利用所有的数据点，爆炸伤害就会被计算出来并执行。决定受到的伤害在计算伤害输出时，伤害会随着与爆炸中心的距离递减。不同的爆炸拥有不同的伤害曲线，通常爆炸中心点会造成最大的伤害输出。利用光线投射的结果，最终伤害输出的判定方式是针对你与爆炸的距离来算出伤害曲线的内插值。破坏VS 伤害《彩虹六号；围攻》中的爆炸是由我们的环境破坏引擎——Realblast——所执行。它是按照程序生成的破坏系统，也就是支撑各位在《彩虹六号；围攻》熟知且喜爱的独特和多样化游戏元素之核心。你可以在这里观看Julien L'Heureux在游戏开发者大会（GDC）说明Realblast。爆炸通常有两种效果——破坏与伤害。伤害会对玩家造成物理伤害，而破坏则是造成任何环境物的破坏。依据爆炸类型，各自可能会有不同的范围和形状。*破坏范围（Realblast）vs 伤害范围。* 在目前的《彩虹六号；围攻》中，初始的光线投射探索和查询回传之后，我们会决定伤害范围和破坏效果。如果光线投射碰上阻挡物，伤害范围就会限缩到Realblast范围。然而，目前对爆炸效果和范围的处理方式并不理想，因为在某些情况下它会让爆炸的结果变得不真实。例如，在目前的爆炸系统下，在开阔地形的C4炸药远比在建筑物里使用还要致命，因为墙壁会限制伤害范围。Y5S1 的碎片调整随着Y5S1我们将对爆炸做些细微但重要的改善，会让爆炸伤害更真实和明显。我们将在《彩虹六号；围攻》的爆炸加入碎片概念。这表示可破坏的物件将不再限制爆炸伤害的范围，因此带来了上述破坏vs伤害范围的问题。碎片会让爆炸伤害更真实，因为玩家受到的伤害将会根据光线投射经过的可破坏物件数而减少。爆炸也会变得更明显，因为碎片洞孔将会为爆炸伤害发生的方向提供更多的视觉回馈。本文来源：小黑盒由小黑盒 刘醒， 翻译整理
